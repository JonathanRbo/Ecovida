<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistir Curso - EduPro</title>

    <!-- Squeleton CSS Framework -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jrobertojunior/squeleton@main/squeleton.min.css">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-light-gray">
    <!-- HEADER -->
    <header class="dashboard-header bg-white border-b-1">
        <div class="container-fluid">
            <nav class="d-flex f-align-center f-justify-between p-20-tb">
                <div class="d-flex f-gap-30 f-align-center">
                    <a href="dashboard.html" class="color-dark">
                        <span class="iccon-arrow-left-1 more-25"></span>
                    </a>
                    <h2 class="m-0-all color-primary">EduPro</h2>
                </div>
                <div class="d-flex f-gap-20 f-align-center">
                    <a href="dashboard.html" class="btn btn-outline">Meus Cursos</a>
                    <div class="user-menu d-flex f-gap-10 f-align-center">
                        <img src="https://i.pravatar.cc/40?img=68" alt="Usu√°rio" class="avatar-round">
                        <span id="user-name">Estudante</span>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- COURSE CONTENT -->
    <section class="p-0-all">
        <div class="container-fluid">
            <div class="row gap-0">
                <!-- Video Player Area -->
                <div class="c-xs-12 c-lg-8 p-0-all">
                    <div class="video-player bg-black">
                        <div id="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                            <!-- Video will be loaded here by JavaScript -->
                        </div>
                    </div>

                    <!-- Course Info -->
                    <div class="course-info bg-white p-30-all">
                        <div class="d-flex f-justify-between f-align-start f-wrap f-gap-20 m-20-b">
                            <div>
                                <span id="course-badge" class="badge badge-primary m-10-b">Carregando...</span>
                                <h2 id="course-title" class="more-40 m-15-b">Carregando curso...</h2>
                                <p id="course-description" class="opacity-7">Aguarde...</p>
                            </div>
                            <div class="text-right">
                                <div class="progress-circle">
                                    <span id="progress-percent" class="more-30 color-primary">0%</span>
                                    <p class="opacity-7 m-5-t">Conclu√≠do</p>
                                </div>
                            </div>
                        </div>

                        <!-- Course Stats -->
                        <div class="d-flex f-gap-30 f-wrap border-t-1 p-20-t">
                            <div class="d-flex f-gap-10 f-align-center">
                                <span class="iccon-video-1 more-20 color-primary"></span>
                                <span class="opacity-7">1 aula</span>
                            </div>
                            <div class="d-flex f-gap-10 f-align-center">
                                <span class="iccon-clock-1 more-20 color-primary"></span>
                                <span class="opacity-7">~15 minutos</span>
                            </div>
                            <div class="d-flex f-gap-10 f-align-center">
                                <span class="iccon-award-1 more-20 color-primary"></span>
                                <span class="opacity-7">Certificado inclu√≠do</span>
                            </div>
                        </div>
                    </div>

                    <!-- Lesson Content -->
                    <div class="lesson-content bg-white p-30-all m-20-t">
                        <h3 class="m-20-b">Sobre este m√≥dulo</h3>
                        <div id="lesson-description" class="opacity-8">
                            <p>Este √© o primeiro m√≥dulo do curso. Assista ao v√≠deo e clique em "Marcar como Conclu√≠do" quando terminar.</p>
                        </div>
                    </div>
                </div>

                <!-- Sidebar - Lessons -->
                <div class="c-xs-12 c-lg-4 p-0-all">
                    <div class="lessons-sidebar bg-white" style="min-height: 100vh; border-left: 1px solid #e0e0e0;">
                        <div class="p-30-all border-b-1">
                            <h3 class="m-10-b">Conte√∫do do Curso</h3>
                            <p class="opacity-7">1 aula ‚Ä¢ ~15 min</p>
                        </div>

                        <!-- Lessons List -->
                        <div class="lessons-list">
                            <div class="lesson-item p-25-all border-b-1 active cursor-pointer">
                                <div class="d-flex f-gap-15 f-align-start">
                                    <span class="iccon-play-circle-1 more-25 color-primary"></span>
                                    <div class="flex-1">
                                        <h4 class="m-10-b">M√≥dulo 1: Introdu√ß√£o</h4>
                                        <div class="d-flex f-gap-10 f-align-center">
                                            <span class="iccon-video-1 opacity-5"></span>
                                            <small class="opacity-7">~15 min</small>
                                        </div>
                                        <div class="m-15-t">
                                            <button id="complete-btn" onclick="completeLesson()" class="btn btn-success btn-sm w-100">
                                                Marcar como Conclu√≠do
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Certificate Section (Hidden initially) -->
                        <div id="certificate-section" class="p-30-all border-t-1" style="display: none;">
                            <div class="text-center">
                                <span class="iccon-award-1 more-60 color-success m-20-b d-block"></span>
                                <h3 class="m-15-b color-success">Parab√©ns! üéâ</h3>
                                <p class="opacity-7 m-20-b">Voc√™ concluiu o curso com sucesso!</p>
                                <button onclick="downloadCertificate()" class="btn btn-primary w-100 m-10-b">
                                    <span class="iccon-download-1"></span> Baixar Certificado
                                </button>
                                <a href="dashboard.html" class="btn btn-outline w-100">Voltar aos Cursos</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Squeleton JS Framework -->
    <script src="https://cdn.jsdelivr.net/gh/jrobertojunior/squeleton@main/squeleton.min.js"></script>

    <!-- Custom JS -->
    <script src="app.js"></script>

    <script>
        // Check if user is logged in
        if (!localStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }

        // Display user name
        const userName = localStorage.getItem('userName') || 'Estudante';
        document.getElementById('user-name').textContent = userName;

        // Get course ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const courseId = urlParams.get('id') || '1';

        // Course data with different YouTube videos
        const courses = {
            '1': {
                title: 'Desenvolvimento Web Completo',
                badge: 'Desenvolvimento',
                badgeColor: 'badge-primary',
                description: 'Aprenda HTML, CSS e JavaScript do zero ao avan√ßado com projetos pr√°ticos.',
                video: 'https://www.youtube.com/embed/Ejkb_YpuHWs', // Web Development Tutorial
                lessonDescription: 'Neste m√≥dulo introdut√≥rio, voc√™ aprender√° os fundamentos do desenvolvimento web e como come√ßar sua jornada como desenvolvedor.'
            },
            '2': {
                title: 'Marketing Digital Profissional',
                badge: 'Marketing',
                badgeColor: 'badge-danger',
                description: 'Domine estrat√©gias de tr√°fego, vendas e convers√£o para impulsionar seus resultados.',
                video: 'https://www.youtube.com/embed/nU-IIXBWlS4', // Digital Marketing Tutorial
                lessonDescription: 'Aprenda as principais estrat√©gias de marketing digital utilizadas por empresas de sucesso e como aplic√°-las na pr√°tica.'
            },
            '3': {
                title: 'UX/UI Design Completo',
                badge: 'Design',
                badgeColor: 'badge-info',
                description: 'Crie interfaces incr√≠veis e experi√™ncias memor√°veis que encantam usu√°rios.',
                video: 'https://www.youtube.com/embed/c9Wg6Cb_YlU', // UX/UI Design Tutorial
                lessonDescription: 'Descubra os princ√≠pios fundamentais de UX/UI Design e como criar interfaces que seus usu√°rios v√£o amar.'
            },
            '4': {
                title: 'Python para Data Science',
                badge: 'Data Science',
                badgeColor: 'badge-success',
                description: 'An√°lise de dados e Machine Learning com Python aplicados a problemas reais.',
                video: 'https://www.youtube.com/embed/_uQrJ0TkZlc', // Python Tutorial
                lessonDescription: 'Domine Python e suas principais bibliotecas para an√°lise de dados, visualiza√ß√£o e machine learning.'
            },
            '5': {
                title: 'Excel Avan√ßado',
                badge: 'Produtividade',
                badgeColor: 'badge-warning',
                description: 'Domine f√≥rmulas, tabelas din√¢micas e automa√ß√£o para aumentar sua produtividade.',
                video: 'https://www.youtube.com/embed/rwbho0CgEAE', // Excel Tutorial
                lessonDescription: 'Aprenda t√©cnicas avan√ßadas de Excel que v√£o transformar voc√™ em um especialista em an√°lise e automa√ß√£o de dados.'
            }
        };

        // Load course data
        const course = courses[courseId];
        if (course) {
            document.getElementById('course-title').textContent = course.title;
            document.getElementById('course-badge').textContent = course.badge;
            document.getElementById('course-badge').className = `badge ${course.badgeColor} m-10-b`;
            document.getElementById('course-description').textContent = course.description;
            document.getElementById('lesson-description').innerHTML = `<p>${course.lessonDescription}</p>`;

            // Load video
            document.getElementById('video-container').innerHTML = `
                <iframe
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                    src="${course.video}"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            `;
        }

        // Check if lesson is already completed
        const completedKey = `course_${courseId}_completed`;
        if (localStorage.getItem(completedKey) === 'true') {
            showCertificateSection();
        }

        function completeLesson() {
            // Mark lesson as completed
            localStorage.setItem(completedKey, 'true');

            // Update UI
            document.getElementById('progress-percent').textContent = '100%';
            document.querySelector('.lesson-item').classList.add('completed');

            // Show certificate section
            showCertificateSection();

            // Show success message
            alert('üéâ Parab√©ns! Voc√™ concluiu o curso com sucesso!\n\nSeu certificado est√° dispon√≠vel para download.');
        }

        function showCertificateSection() {
            document.getElementById('complete-btn').style.display = 'none';
            document.getElementById('certificate-section').style.display = 'block';
            document.getElementById('progress-percent').textContent = '100%';

            // Add completed icon
            const lessonItem = document.querySelector('.lesson-item');
            const playIcon = lessonItem.querySelector('.iccon-play-circle-1');
            playIcon.className = 'iccon-check-circle-1 more-25 color-success';
        }

        function downloadCertificate() {
            const courseName = course.title;
            const studentName = userName;
            const date = new Date().toLocaleDateString('pt-BR');

            alert(`üìú Certificado\n\nCertificamos que ${studentName} concluiu com sucesso o curso:\n\n"${courseName}"\n\nData: ${date}\n\n(Em uma implementa√ß√£o real, aqui seria gerado um PDF)`);
        }
    </script>
</body>
</html>
